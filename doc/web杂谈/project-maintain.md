# 可维护性思考

> 设计模式考虑的是代码之间的关系，设计原则考虑的是模块以及项目间的关系，项目越来越复杂，可维护性也是且行且难。🌉

借鉴现实世界，不代表是现实世界🌍；
提前优化并不一定好，但不优化就是慢性死亡🔥；
团队合作项目的代码是用来传承的而不是用来炫技🎨；
有意识做优化是个好习惯，但意识得能落到实处🚩；

## 可维护方式

> 列出一些最佳实践

- 必要、准确而不累赘的注释
  - 特定功能、变量特定含义
  - 某些实现hack
  - 非正常逻辑
  - 等等...

- 组件化开发
  - 命名语义化
  - 组件划分的一大原则是，尽量降低耦合性
  - 组件的一大目标是提升复用性
  - 组件拆分细化（不能太细化），编写组件文件代码，总行数最好不要超过 `400` 行。避免方法、属性、状态过多，维护艰难，逻辑交叉耦合过多。
  - 每个函数不要超过`100`行，遵循函数功能**单一原则**，不要让一个方法函数包含过多的逻辑功能
  - 组件标签模板中不要嵌入太多逻辑

- 定义方法、数据状态、组件要物以类聚，位置靠近，方便查找；css属性顺序也需要按此规则

- 变量、方法、类等的命名最好有一定的规律（CSS也包含)
  - 具有含义的命名避免太过宽泛，具体、连贯的命名要求即准确又简短
  - 用于存储数组的变量以 List 作为名字后缀，
  - 用于某种信息的对象变量以 Info 作为名字后缀
  - 用于判断某种逻辑的变量以 is 作为前缀
  - 等等...

- 代码容错、健壮
  - 接口数据返回判断
  - 属性存在判断
  - 方法存在判断
  - 空判断
  - 类型判断
  - 等等

- 分支判断语句优化
  - 提前判断结束
  - 不要在判断分支里写太长的逻辑

- DRY原则，通用的功能要封装成组件、方法进行复用，但业务逻辑、业务组件，慎重复用（类似编辑页，详情页这种大部分重叠的）

- 单独的业务代码之间、业务代码与非业务代码之间进行必要的隔离

- 删掉不必要的代码。包括无效代码、注释的代码、不必要的调试代码（console）

- 良好的沟通，避免无效的产出；需求随时会变，明确现在需求，不写无效代码

- 遵守制定好的规范，多人协作规范，避免破窗效应，可以提出改进疑问，不能自行其道

- 定期的代码 `review`

- 必要的踩坑与经验文档总结、修改、升级

- typescript/eslint/stylelint/prettier等

- 关键页面从源头做好组件拆分设计

- 尽量使用无副作用的纯函数

- 充分利用变量，不定义无用，可有可无的变量。对有特定含义的变量命名语义化
